<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Conferidor Loterias Caixa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

<div class="max-w-6xl mx-auto p-4">
  <h1 class="text-2xl font-bold mb-6">üé∞ Conferidor Loterias Caixa</h1>

  <!-- HOME -->
  <div id="home">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="gameCards"></div>
  </div>

  <!-- APOSTAS -->
  <div id="bets" class="hidden">
    <button onclick="goHome()" class="mb-4 text-blue-600">‚Üê Voltar</button>
    <h2 id="betsTitle" class="text-xl font-semibold mb-2"></h2>

    <input id="betName" class="border p-2 w-full mb-2" placeholder="Nome do jogo (opcional)">
    <div id="betRule" class="text-sm mb-2 text-gray-600"></div>
    <div id="betNumbers" class="grid grid-cols-6 sm:grid-cols-8 gap-2 mb-4"></div>

    <button onclick="saveBet()" class="bg-green-600 text-white px-4 py-2 rounded">Salvar jogo</button>
    <div id="betList" class="mt-4"></div>

    <button onclick="goDraw()" class="mt-6 bg-blue-600 text-white px-4 py-2 rounded">Ir para sorteio</button>
  </div>

  <!-- SORTEIO -->
  <div id="draw" class="hidden">
    <button onclick="goHome()" class="mb-4 text-blue-600">‚Üê In√≠cio</button>
    <h2 class="text-xl font-semibold mb-2">Sorteio</h2>

    <div id="drawRule" class="text-sm mb-2 text-gray-600"></div>
    <div id="drawNumbers" class="grid grid-cols-6 sm:grid-cols-8 gap-2 mb-4"></div>

    <div class="mb-2 font-semibold">N√∫meros sorteados:</div>
    <div id="drawnList" class="flex flex-wrap gap-2 mb-4"></div>

    <button onclick="finishDraw()" class="bg-purple-600 text-white px-4 py-2 rounded">Finalizar sorteio</button>
    <div id="results" class="mt-4"></div>
  </div>
</div>

<script>
/* ===== CONFIGURA√á√ÉO DE TODAS AS LOTERIAS CAIXA ===== */
var games = {
  megasena: {name:'Mega-Sena', min:6, max:15, range:60, wins:[4,5,6]},
  lotofacil: {name:'Lotof√°cil', min:15, max:20, range:25, wins:[11,12,13,14,15]},
  quina: {name:'Quina', min:5, max:15, range:80, wins:[2,3,4,5]},
  lotomania: {name:'Lotomania', min:50, max:50, range:100, wins:[20]},
  timemania: {name:'Timemania', min:10, max:10, range:80, wins:[3,4,5,6,7]},
  duplasena: {name:'Dupla Sena', min:6, max:15, range:50, wins:[3,4,5,6]},
  diadesorte: {name:'Dia de Sorte', min:7, max:15, range:31, wins:[4,5,6,7]},
  supersete: {name:'Super Sete', min:7, max:14, range:10, wins:[3,4,5,6,7]}
};

var currentGameKey = null;
var currentGame = null;
var bets = [];
var betNumbers = [];
var drawn = [];

/* ===== INIT ===== */
(function init(){
  var cards = document.getElementById('gameCards');
  for(var k in games){
    (function(key){
      var g = games[key];
      var card = document.createElement('div');
      card.className = 'bg-white rounded-2xl shadow hover:shadow-lg transition cursor-pointer overflow-hidden';
      card.innerHTML = '<div class="h-28 bg-gray-200 flex items-center justify-center">LOGO</div>'+
                       '<div class="p-4">'+
                       '<h3 class="font-bold">'+g.name+'</h3>'+
                       '<p class="text-sm text-gray-600">'+g.min+' a '+g.max+' n√∫meros</p>'+
                       '</div>';
      card.onclick = function(){ selectGame(key); };
      cards.appendChild(card);
    })(k);
  }
})();

/* ===== NAVEGA√á√ÉO ===== */
function selectGame(key){
  currentGameKey = key;
  currentGame = games[key];
  bets = [];
  betNumbers = [];
  document.getElementById('home').className = 'hidden';
  document.getElementById('bets').className = '';
  document.getElementById('draw').className = 'hidden';
  document.getElementById('betsTitle').innerText = currentGame.name;
  document.getElementById('betRule').innerText = 'Escolha de '+currentGame.min+' at√© '+currentGame.max+' n√∫meros.';
  renderBetNumbers();
  renderBetList();
}

function goHome(){
  document.getElementById('home').className = '';
  document.getElementById('bets').className = 'hidden';
  document.getElementById('draw').className = 'hidden';
}

function goDraw(){
  if(bets.length === 0){ alert('Cadastre ao menos um jogo.'); return; }
  drawn = [];
  document.getElementById('bets').className = 'hidden';
  document.getElementById('draw').className = '';
  document.getElementById('drawRule').innerText = 'Sorteie '+currentGame.min+' n√∫meros.';
  renderDrawNumbers();
  updateDrawnList();
}

/* ===== APOSTAS ===== */
function renderBetNumbers(){
  var div = document.getElementById('betNumbers');
  div.innerHTML = '';
  for(var i=1;i<=currentGame.range;i++){
    (function(n){
      var b = document.createElement('button');
      b.innerText = n;
      b.className = 'border rounded-lg p-2';
      b.onclick = function(){ toggleBet(n,b); };
      div.appendChild(b);
    })(i);
  }
}

function toggleBet(n, btn){
  var idx = betNumbers.indexOf(n);
  if(idx === -1){
    if(betNumbers.length >= currentGame.max){ alert('Dessa vez voc√™ investiu, hein!'); return; }
    betNumbers.push(n);
    btn.className = 'bg-green-500 text-white rounded-lg p-2';
  } else {
    betNumbers.splice(idx,1);
    btn.className = 'border rounded-lg p-2';
  }
}

function saveBet(){
  if(betNumbers.length < currentGame.min){ alert('Poucos n√∫meros.'); return; }
  var name = document.getElementById('betName').value;
  if(!name){ name = 'Jogo #' + (bets.length+1); }
  bets.push({name:name, numbers: betNumbers.slice()});
  betNumbers = [];
  document.getElementById('betName').value = '';
  renderBetNumbers();
  renderBetList();
}

function renderBetList(){
  var div = document.getElementById('betList');
  div.innerHTML = '';
  for(var i=0;i<bets.length;i++){
    var d = document.createElement('div');
    d.className = 'bg-gray-100 p-2 rounded mb-2';
    d.innerText = bets[i].name + ': ' + bets[i].numbers.join(', ');
    div.appendChild(d);
  }
}

/* ===== SORTEIO ===== */
function renderDrawNumbers(){
  var div = document.getElementById('drawNumbers');
  div.innerHTML = '';
  for(var i=1;i<=currentGame.range;i++){
    (function(n){
      var b = document.createElement('button');
      b.innerText = n;
      b.className = 'border rounded-lg p-2';
      b.onclick = function(){ toggleDraw(n,b); };
      div.appendChild(b);
    })(i);
  }
}

function toggleDraw(n, btn){
  var idx = drawn.indexOf(n);
  if(idx === -1){
    if(drawn.length >= currentGame.min){ alert('Sorteio completo.'); return; }
    drawn.push(n);
    btn.className = 'bg-blue-500 text-white rounded-lg p-2';
  } else {
    drawn.splice(idx,1);
    btn.className = 'border rounded-lg p-2';
  }
  updateDrawnList();
}

function updateDrawnList(){
  var div = document.getElementById('drawnList');
  div.innerHTML = '';
  var arr = drawn.slice().sort(function(a,b){return a-b});
  for(var i=0;i<arr.length;i++){
    var s = document.createElement('span');
    s.className = 'bg-blue-100 px-3 py-1 rounded-full';
    s.innerText = arr[i];
    div.appendChild(s);
  }
}

function finishDraw(){
  var res = document.getElementById('results');
  res.innerHTML = '';
  for(var i=0;i<bets.length;i++){
    var hits = 0;
    for(var j=0;j<bets[i].numbers.length;j++){
      if(drawn.indexOf(bets[i].numbers[j]) !== -1){ hits++; }
    }
    var d = document.createElement('div');
    d.className = 'bg-white p-3 rounded-xl shadow mb-2';
    d.innerHTML = '<strong>'+bets[i].name+'</strong> ‚Äî '+hits+' acertos';
    res.appendChild(d);
  }
}
</script>
</body>
</html>