<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Conferidor Loterias Caixa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

<div class="max-w-5xl mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">üé∞ Conferidor Loterias Caixa</h1>

  <!-- HOME -->
  <div id="home">
    <p class="mb-4">Escolha a modalidade:</p>
    <div id="games" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
  </div>

  <!-- APOSTAS -->
  <div id="bets" class="hidden">
    <button onclick="goHome()" class="mb-4 text-blue-600">‚Üê Voltar</button>
    <h2 id="betsTitle" class="text-xl font-semibold mb-2"></h2>
    <input id="betName" class="border p-2 w-full mb-2" placeholder="Nome do jogo (opcional)">
    <div id="betNumbers" class="grid grid-cols-6 gap-2 mb-4"></div>
    <button onclick="saveBet()" class="bg-green-600 text-white px-4 py-2 rounded">Salvar jogo</button>
    <div id="betList" class="mt-4"></div>
    <button onclick="goDraw()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded">Ir para sorteio</button>
  </div>

  <!-- SORTEIO -->
  <div id="draw" class="hidden">
    <button onclick="goHome()" class="mb-4 text-blue-600">‚Üê In√≠cio</button>
    <h2 class="text-xl font-semibold mb-2">Sorteio</h2>
    <div id="drawNumbers" class="grid grid-cols-6 gap-2 mb-4"></div>
    <div class="mb-2">N√∫meros sorteados:</div>
    <div id="drawnList" class="flex flex-wrap gap-2 mb-4"></div>
    <button onclick="finishDraw()" class="bg-purple-600 text-white px-4 py-2 rounded">Finalizar sorteio</button>
    <div id="results" class="mt-4"></div>
  </div>
</div>

<script>
// ===== CONFIGURA√á√ïES DOS JOGOS =====
var gamesConfig = {
  megasena: { name: 'Mega-Sena', min: 6, max: 15, range: 60, win: [4,5,6] },
  lotofacil: { name: 'Lotof√°cil', min: 15, max: 20, range: 25, win: [11,12,13,14,15] },
  quina: { name: 'Quina', min: 5, max: 15, range: 80, win: [2,3,4,5] },
  lotomania: { name: 'Lotomania', min: 50, max: 50, range: 100, win: [20] }
};

var currentGame = null;
var currentBets = [];
var currentBetNumbers = [];
var drawnNumbers = [];

// ===== INIT =====
(function init(){
  var gamesDiv = document.getElementById('games');
  for(var key in gamesConfig){
    (function(k){
      var g = gamesConfig[k];
      var card = document.createElement('div');
      card.className = 'bg-white p-4 rounded-xl shadow cursor-pointer hover:shadow-lg transition';
      card.innerHTML = '<div class="h-24 bg-gray-200 rounded mb-2 flex items-center justify-center">LOGO</div>'+
                       '<h3 class="font-bold">'+g.name+'</h3>'+
                       '<p class="text-sm">'+g.min+' a '+g.max+' n√∫meros</p>';
      card.onclick = function(){ selectGame(k); };
      gamesDiv.appendChild(card);
    })(key);
  }
})();

// ===== NAVEGA√á√ÉO =====
function selectGame(key){
  currentGame = gamesConfig[key];
  currentBets = [];
  currentBetNumbers = [];
  document.getElementById('home').className = 'hidden';
  document.getElementById('bets').className = '';
  document.getElementById('betsTitle').innerText = currentGame.name;
  renderBetNumbers();
  renderBetList();
}

function goHome(){
  document.getElementById('home').className = '';
  document.getElementById('bets').className = 'hidden';
  document.getElementById('draw').className = 'hidden';
}

function goDraw(){
  if(currentBets.length === 0){ alert('Cadastre ao menos um jogo'); return; }
  document.getElementById('bets').className = 'hidden';
  document.getElementById('draw').className = '';
  drawnNumbers = [];
  renderDrawNumbers();
  updateDrawnList();
}

// ===== APOSTAS =====
function renderBetNumbers(){
  var div = document.getElementById('betNumbers');
  div.innerHTML = '';
  for(var i=1;i<=currentGame.range;i++){
    (function(n){
      var b = document.createElement('button');
      b.innerText = n;
      b.className = 'border rounded p-2';
      b.onclick = function(){ toggleBetNumber(n,b); };
      div.appendChild(b);
    })(i);
  }
}

function toggleBetNumber(n, btn){
  var idx = currentBetNumbers.indexOf(n);
  if(idx === -1){
    if(currentBetNumbers.length >= currentGame.max){ alert('M√°ximo atingido'); return; }
    currentBetNumbers.push(n);
    btn.className = 'bg-green-500 text-white rounded p-2';
  } else {
    currentBetNumbers.splice(idx,1);
    btn.className = 'border rounded p-2';
  }
}

function saveBet(){
  if(currentBetNumbers.length < currentGame.min){ alert('Poucos n√∫meros'); return; }
  var name = document.getElementById('betName').value;
  if(!name){ name = 'Jogo #' + (currentBets.length+1); }
  currentBets.push({ name:name, numbers: currentBetNumbers.slice() });
  currentBetNumbers = [];
  document.getElementById('betName').value = '';
  renderBetNumbers();
  renderBetList();
}

function renderBetList(){
  var div = document.getElementById('betList');
  div.innerHTML = '';
  for(var i=0;i<currentBets.length;i++){
    var p = document.createElement('div');
    p.className = 'bg-gray-100 p-2 rounded mb-1';
    p.innerText = currentBets[i].name + ': ' + currentBets[i].numbers.join(', ');
    div.appendChild(p);
  }
}

// ===== SORTEIO =====
function renderDrawNumbers(){
  var div = document.getElementById('drawNumbers');
  div.innerHTML = '';
  for(var i=1;i<=currentGame.range;i++){
    (function(n){
      var b = document.createElement('button');
      b.innerText = n;
      b.className = 'border rounded p-2';
      b.onclick = function(){ toggleDraw(n,b); };
      div.appendChild(b);
    })(i);
  }
}

function toggleDraw(n, btn){
  var idx = drawnNumbers.indexOf(n);
  if(idx === -1){
    if(drawnNumbers.length >= currentGame.min){ alert('Sorteio completo'); return; }
    drawnNumbers.push(n);
    btn.className = 'bg-blue-500 text-white rounded p-2';
  } else {
    drawnNumbers.splice(idx,1);
    btn.className = 'border rounded p-2';
  }
  updateDrawnList();
}

function updateDrawnList(){
  var div = document.getElementById('drawnList');
  div.innerHTML = '';
  var arr = drawnNumbers.slice().sort(function(a,b){return a-b});
  for(var i=0;i<arr.length;i++){
    var s = document.createElement('span');
    s.className = 'bg-blue-100 px-3 py-1 rounded-full';
    s.innerText = arr[i];
    div.appendChild(s);
  }
}

function finishDraw(){
  var res = document.getElementById('results');
  res.innerHTML = '';
  for(var i=0;i<currentBets.length;i++){
    var hits = 0;
    for(var j=0;j<currentBets[i].numbers.length;j++){
      if(drawnNumbers.indexOf(currentBets[i].numbers[j]) !== -1){ hits++; }
    }
    var d = document.createElement('div');
    d.className = 'bg-white p-3 rounded shadow mb-2';
    d.innerHTML = '<strong>'+currentBets[i].name+'</strong> ‚Äî '+hits+' acertos';
    res.appendChild(d);
  }
}
</script>
</body>
</html>
